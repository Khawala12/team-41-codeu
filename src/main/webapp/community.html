<!DOCTYPE html>
<html>
<head>
    <title>Community Page</title>
    <link rel="stylesheet" href="Style1.css" />
    <script>

        /** Fetches users and adds them to the page. */
        function fetchUserList(){
            const url = '/user-list';
            fetch(url).then((response) => {
                return response.json();
        }).then((users) => {
                const list = document.getElementById('list');
            list.innerHTML = '';

            users.forEach((user) => {
                const userListItem = buildUserListItem(user);
            list.appendChild(userListItem);
        });
        });
        }

        /**
         * Builds a list element that contains a link to a user page, e.g.
         * <li><a href="/user-page.html?user=test@example.com">test@example.com</a></li>
         */
        function buildUserListItem(user){
            const userLink = document.createElement('a');
            userLink.setAttribute('href', '/user-page.html?user=' + user);
            userLink.appendChild(document.createTextNode(user));
            const userListItem = document.createElement('li');
            userListItem.appendChild(userLink);
            return userListItem;
        }

        /** Fetches data and populates the UI of the page. */
        function buildUI(){
            fetchUserList();
        }
    </script>
</head>
<body BGCOLOR="#f5f5dc">
<div class="container1">
    <nav id="nav-menu-container">
        <ul class="nav-menu" id="navigation">
            <li><a href="/">Home</a></li>
            <li><a href="/aboutus.html">About</a></li>
            <li class="active"><a href="/community.html">Community</a></li>
            <li><a href="/feed.html">User Posts</a></li>
            <li ><a>Companies</a>
                <ul>
                    <li><a href="map.html">Location</a> </li>
                    <li><a href="chart.html">Reviews</a> </li>
                </ul>
            </li>
            <li><a href="user-page.html">Login</a></li>
        </ul>
    </nav><!-- #nav-menu-container -->
</div>
<br>
<div class="logo">
    <img src="img/logo.png">
</div>
<br>
<br>
<br>
<div id="content">
    <h1>Community Page</h1>
    <p>Here is a list of every user who has posted a message:</p>
    <hr/>
    <ul1 id="list">Loading...</ul1>
</div>
</body>
</html>
